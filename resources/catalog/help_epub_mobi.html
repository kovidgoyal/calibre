<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<style type="text/css">
h1 {
	font-size: 1.5em;
	text-align: center;
}
h2 {
	font-size: 1.0em;
	font-weight: normal;
	margin-bottom: 0.25em;
	margin-top: 0px;
	font-family: Arial, Helvetica, sans-serif;
}
h3 {
	text-align: center;
	font-family: Arial, Helvetica, sans-serif;
	font-weight: normal;
}
.ui_element {
	font-family: Arial, Helvetica, sans-serif;
	font-weight: normal;
	font-size: 90%;
}
.user-input {
	font-family: "Courier New", Courier, monospace;
	font-size: 90%;
}
.code_header {
	text-indent: 2em;
}
.code_body {
	font-family: "Lucida Console", Monaco, monospace;
	background-color: #EEE;
	font-size: .9em;
	margin-left: 2em;
	margin-top: 0px;
}
</style>
</head>

<body>
<h1><a name="toc" id="toc"></a>AZW3 • EPUB • MOBI Catalogs </h1>
<h2><a href="#selecting_books_to_catalog">Selecting books to catalog</a></h2>
<h2><a href="#included_sections">Included sections: Selecting which sections to include in the catalog</a></h2>
<h2><a href="#prefixes">Prefixes: Adding a prefix indicating book status</a></h2>
<h2><a href="#excluded_books">Excluded books: Ignoring certain books when generating the catalog</a></h2>
<h2><a href="#excluded_genres">Excluded genres: Ignoring certain tags as genres when generating the catalog</a></h2>
<h2><a href="#other_options">Other options: Specifying thumb size, adding extra information to Descriptions</a></h2>
<h2><a href="#customizing_catalog_appearance">Customizing the appearance of the generated catalog</a></h2>
<hr />
<h3><a name="selecting_books_to_catalog" id="selecting_books_to_catalog"></a><a href="#toc">Selecting books to catalog</a></h3>
<p>If you want all of your library cataloged, remove any search or filtering criteria by clearing the <span class="ui_element">Search:</span> field in the main window. With a single book selected, all books in your library will be candidates for inclusion in the generated catalog. Individual books may be excluded by various criteria; see the <a href="#excluded_genres">Excluded genres</a> section below for more information.</p>
<p>If you want only some of your library cataloged, you have two options:</p>
<ol>
  <li>Create a multiple selection of  the books you want cataloged. With more than one book selected in calibre's main window, only the selected books will be cataloged.</li>
  <li>Use the <span class="ui_element">Search:</span> field or calibre's Tag Browser to filter the displayed books. With a single book selected, only the displayed books will be cataloged.</li>
</ol>
<hr />
<h3><a name="included_sections" id="included_sections"></a><a href="#toc">Included sections</a></h3>
<p>&lt;img&gt;</p>
<p>Sections enabled by a checkmark will be included in the generated catalog:</p>
<ul>
  <li> <span class="ui_element">Authors</span> - all books, sorted by author, presented in a list format.</li>
  <li><strong class="ui_element">Titles</strong> - all books, sorted by title, presented in a list format.</li>
  <li><strong class="ui_element">Series</strong> - all books in series, sorted by series, presented in a list format</li>
  <li><strong class="ui_element">Genres</strong> - individual genres presented in a list, sorted by Author and Series</li>
  <li><strong class="ui_element">Recently Added</strong> - all books, sorted in reverse chronological order. List includes books added in the last 30 days, then a month-by-month listing of added books.</li>
  <li><strong class="ui_element">Descriptions</strong> - detailed description page for each book, including a cover thumbnail and comments. Sorted by author, with non-series books listed before series books.</li>
</ul>
<hr />
<h3><a name="prefixes" id="prefixes"></a><a href="#toc">Prefixes</a></h3>
<p>&lt;img&gt;</p>
<p>Prefix rules specify matching criteria and a prefix to use when the criteria is matched.</p>
<p>The checkbox in the first column enables the rule. <span class="ui_element">Name</span> is a rule name that you provide. <span class="ui_element">Field</span> is either <span class="ui_element">Tags</span> or a custom column in your library. <span class="ui_element">Value</span> is the content of <span class="ui_element">Field</span> to match. When a prefix rule is satisfied, the book will be marked with the selected symbol in the <span class="ui_element">Prefix</span> column.</p>
<p>Three prefix rules have been specified in the example above:</p>
<ol>
  <li><span class="user-input">Read book</span> specifies that a book with any date in a custom column named <span class="user-input">Last read</span> will be prefixed with a checkmark symbol.</li>
  <li><span class="user-input">Wishlist item</span> specifies that any book with a <span class="user-input">Wishlist</span> tag will be prefixed with an X symbol.</li>
  <li> <span class="user-input">Library books</span> specifies that any book with a value of True (or Yes) in a custom column <span class="user-input">Available in Library</span> will be prefixed with a double arrow symbol.</li>
</ol>
<p>The first matching rule supplies the prefix. Disabled or incomplete rules are ignored.</p>
<hr />
<h3><a name="excluded_books" id="excluded_books"></a><a href="#toc">Excluded books</a></h3>
<p>&lt;img&gt;</p>
<p>Exclusion rules specify matching criteria for books that will not be cataloged.</p>
<p>The checkbox in the first column enables the rule.  <span class="ui_element">Name</span> is a rule name that you provide. <span class="ui_element">Field</span> is either <span class="ui_element">Tags</span> or a custom column in your library. <span class="ui_element">Value</span> is the content of <span class="ui_element">Field</span> to match. When an exclusion rule is satisfied, the book will be excluded from the generated catalog.</p>
<p>Two exclusion rules have been specified in the example above:</p>
<ol>
  <li>The <span class="user-input">Catalogs</span> rule specifies that any book with a <span class="user-input">Catalog</span> tag will be excluded from the generated catalog.</li>
  <li>The <span class="user-input">Archived Books</span> rule specifies that any book with a value of <span class="user-input">Archived</span> in the custom column <span class="user-input">Status</span> will be excluded from the generated catalog.</li>
</ol>
<p>All  rules are evaluated for every book. Disabled or incomplete rules are ignored.</p>
<hr />
<h3><a name="excluded_genres" id="excluded_genres"></a><a href="#toc">Excluded genres</a></h3>
<p>&lt;img&gt;</p>
<p>When the catalog is generated, tags in your database are used as genres. For example, you may have the tags <span class="user-input">Fiction</span> and <span class="user-input">Nonfiction</span> applied to books in your library. These tags become genres in the generated catalog, with all tagged books showing up in their respective genre lists.</p>
<p>You may be using certain tags for other purposes, perhaps a <span class="user-input">+</span> to indicate a read book, or a bracketed tag like <span class="user-input">[Amazon Freebie]</span> to indicate a book's source. The <span class="ui_element">Excluded genres</span> regex allows you to specify tags that you don't want used as genres in the generated catalog. The default exclusion regex pattern <span class="user-input">\[.+\]\+</span> excludes any tags of the form <span class="user-input">[tag]</span>, as well as excluding +, the default tag for read books, from being used as genres in the generated catalog.</p>
<p>You can also use the exact tag name in a regex. For example, <span class="user-input">[Amazon Freebie]</span> will exclude that tag from the generated catalog. If you want to list multiple exact tags for exclusion, put a pipe character between them: <span class="user-input">[Amazon Freebie]|[Project Gutenberg]</span>.</p>
<p>The Results field shows you which tags will be excluded when the catalog is built, based on the tags in your database and the regex you enter.</p>
<hr />
<h3><a name="other_options" id="other_options"></a><a href="#toc">Other options</a></h3>
<p><span class="ui_element">Thumb width</span> specifies a width preference for cover thumbnails included in the Descriptions section. Thumbnails are cached to improve performance. If you want to experiment with different widths, try generating a catalog with just a few books until you've found your optimal width, then generate your full catalog. The first time a catalog is generated with a new thumbnail width, performance will be slower, but subsequent runs will take advantage of the cache.</p>
<p><span class="ui_element">Extra note</span> specifies a custom column's contents to be inserted into the Description, opposite the cover. For example, you might want to display the date you last read a book using a <span class="user-input">Last Read</span> custom column. For advanced use of the Description note feature, see <a href="http://www.mobileread.com/forums/showpost.php?p=1335767&postcount=395" target="new">this post in the calibre forum</a>.</p>
<p><span class="ui_element">Merge with Comments</span> specifies a custom column whose content will be non-destructively merged with the Comments metadata during catalog generation. For example, you might have a custom column <span class="user-input">Author Bio</span> that you'd like to append to the Comments metadata. You can choose to insert the custom column contents before or after the Comments section, and optionally separate the appended content with a horizontal rule. Eligible custom column types include <span class="user-input">text</span>, <span class="user-input">comments</span>, and <span class="user-input">composite</span>.</p>
<hr />
<h3><a name="customizing_catalog_appearance" id="customizing_catalog_appearance"></a><a href="#toc">Customizing catalog appearance</a></h3>
<p>If you wish to change the default appearance of the Description pages or Section lists, you can do so by modifying a local copy of the catalog's template and CSS files, overriding the default layout. This requires familiarity with HTML and CSS.<br />
</p>
<ul>
  <li>Open your calibre configuration directory - <span class="ui_element">Preferences|Advanced|Miscellaneous|Open calibre configuration directory</span>.<br />
  </li>
  <li>Within this directory, create a subdirectory <span class="user-input">resources</span> (if it doesn't already exist).<br />
  </li>
  <li>Within the <span class="user-input">resources</span> directory, create a subdirectory <span class="user-input">catalog</span>.<br />
  </li>
  <li>Open a new file system window, navigate to the default catalog resources folder:<br />
    <ul>
      <li>OSX: <span class="user-input">Applications/calibre/Contents/Resources/resources/catalog</span><br />
      </li>
      <li>Windows: <span class="user-input">Program Files\Calibre2\resources\catalog</span><br />
      </li>
    </ul>
  </li>
  <li>Copy all of the files from the default catalog resources folder to the newly created <span class="user-input">resources/catalog</span> directory within your calibre configuration directory.<br />
  </li>
  <li>Edit <span class="user-input">template.xhtml</span> and <span class="user-input">stylesheet.css</span> to your preferences. If you want to start over, copy from the default template and CSS files again. If you want to discard your customizations, delete the <span class="user-input">catalog</span> subfolder from your calibre configuration resources directory.<br />
  </li>
</ul>
<p>Customizing the Description page. Available fields in <span class="user-input">template.xhtml</span>:<br />
</p>
<ul>
  <li>{author} - Book author(s)<br />
  </li>
  <li>{author_prefix} - Checkmark if read, 'X' if wishlist, else blank<br />
  </li>
  <li>{comments} - Contents of the book's Comments field<br />
  </li>
  <li>{formats} - List of installed formats<br />
  </li>
  <li>{genres} - List of genres<br />
  </li>
  <li>{note_content} - Note content as specified in options<br />
  </li>
  <li>{note_source} - Note source field as specified in options<br />
  </li>
  <li>{pubdate} - Month/Year published<br />
  </li>
  <li>{publisher} - Publisher<br />
  </li>
  <li>{pubmonth} - Month published<br />
  </li>
  <li>{pubyear} - Year published<br />
  </li>
  <li>{rating} - Graphical rating<br />
  </li>
  <li>{series} - Series name<br />
  </li>
  <li>{series_index} - Series index<br />
  </li>
  <li>{thumb} - Cover thumb url<br />
  </li>
  <li>{title} - Book title<br />
  </li>
</ul>
<p>Example: Changing year of publication in Description header<br />
</p>
<ul>
  <li>Default: &lt;td class=&quot;date&quot;&gt;{pubyear}&lt;/td&gt;<br />
  </li>
  <li>Removed: &lt;td class=&quot;date&quot;&gt;&lt;/td&gt;<br />
  </li>
  <li>Augmented: &lt;td class=&quot;date&quot;&gt;Year of publication: {pubyear}&lt;/td&gt;<br />
  </li>
  <li>Modified: &lt;td class=&quot;date&quot;&gt;{pubmonth} {pubyear}&lt;/td&gt;</li>
</ul>
<p>Customizing the Section lists. Templates controlling the display of book titles in the various Section lists (Books by Author, Books by Title, etc) may be edited to taste. <br />
  Available fields in <span class="user-input">section_list_templates.py</span>:<br />
</p>
<ul>
  <li>{title} - Title of the book<br />
  </li>
  <li>{series} - Series name<br />
  </li>
  <li>{series_index} - Number of the book in the series<br />
  </li>
  <li>{rating} - 0-5 stars<br />
  </li>
  <li>{rating_parens} - (0-5 stars)<br />
  </li>
  <li>{pubyear} - Year the book was published<br />
  </li>
  <li>{pubyear_parens} - (Year the book was published)<br />
  </li>
</ul>
<p>Example: Changing Books by Author to remove year of publication:<br />
  Default:</p>
<p>&lt;img&gt;	</p>
<p class="code_header">Code:<br />
</p>
<p class="code_body">by_authors_normal_title_template = '{title} {pubyear_parens}'<br />
</p>
<p class="code_body">by_authors_series_title_template = '[{series_index}] {title} {pubyear_parens}'<br />
  </p>
<p>Year of publication removed:</p>
<p>Code:<br />
  by_authors_normal_title_template = '{title}'<br />
  by_authors_series_title_template = '[{series_index}] {title}'<br />
  Rating added:</p>
<p>Code:<br />
  by_authors_normal_title_template = '{title} {rating}'<br />
  by_authors_series_title_template = '[{series_index}] {title} {rating}'</p>
<p>Tips for experimenting with customization:<br />
  Work with a small subset of your catalog, 5-10 books<br />
  If you are experimenting with Section list templates, disable Descriptions in E-book options - catalog generation will be much faster.<br />
  If you are experimenting with CSS, build an EPUB version of your catalog, explode it with the Tweak EPUB feature to find the class of the element you want to change.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
